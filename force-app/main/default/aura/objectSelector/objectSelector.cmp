<aura:component controller="ObjectListController">
    
    <aura:attribute name="sObjectOptions" type="List" />
    <aura:attribute name="selectedSObject" type="String" />
    <aura:attribute name="fieldOptions" type="List" />
    <aura:attribute name="selectedFields" type="List" />
    
    
    <aura:handler name="init" value="{!this}" action="{!c.init}" />
    
    <lightning:select name="sObjectSelector" label="" aura:id="sObjectSelector" onchange="{!c.getFields}">
        <option value="">-- Select SObject --</option>
        <aura:iteration items="{!v.sObjectOptions}" var="sObject">
            <option value="{!sObject}">{!sObject}</option>
        </aura:iteration>
    </lightning:select>
    
    <aura:if isTrue="{!not(empty(v.fieldOptions))}">
        <lightning:dualListbox name="fieldSelector" label="Select Fields" sourceLabel="Available" selectedLabel="Selected" options="{!v.fieldOptions}" value="{!v.selectedFields}" />
    </aura:if>
    
    <br/>
    <aura:if isTrue="{!not(empty(v.selectedFields))}">
        <div style="text-align: center;"><lightning:button  label="Generate Query" onclick="{!c.generateQuery}" /></div></aura:if>
    <aura:attribute name="query" type="String" />
    
    <aura:if isTrue="{!not(empty(v.query))  &amp;&amp; not(empty(v.selectedFields))}">
        <lightning:textarea name="query" label="Generated Query" value="{!v.query}" disabled="true" />
    </aura:if>
    
</aura:component>